<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Explorer Halte TransJakarta</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
            background-color: #fdfcfb;
            color: #333;
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 600px;
            margin-left: auto;
            margin-right: auto;
            height: 320px;
            max-height: 400px;
        }
        @media (min-width: 768px) {
            .chart-container {
                height: 400px;
            }
        }
        ::-webkit-scrollbar {
            width: 8px;
        }
        ::-webkit-scrollbar-track {
            background: #f1f1f1;
        }
        ::-webkit-scrollbar-thumb {
            background: #d1c7bc;
            border-radius: 10px;
        }
        ::-webkit-scrollbar-thumb:hover {
            background: #bcaea0;
        }
    </style>
</head>
<h1>100% AI GEN</h1>
<body class="antialiased">
    <div class="container mx-auto px-4 py-8 md:py-12">
        
        <header class="text-center mb-8 md:mb-12">
            <h1 class="text-4xl md:text-5xl font-bold text-gray-800 tracking-tight">Explorer Halte TransJakarta</h1>
            <p class="mt-3 text-lg text-gray-600 max-w-3xl mx-auto">Gunakan alat ini untuk mencari, memfilter, dan memvisualisasikan data halte bus TransJakarta di seluruh kota.</p>
        </header>

        <main>
            <div class="bg-white rounded-xl shadow-md p-4 sm:p-6 mb-8 border border-gray-200">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                    <div>
                        <label for="search-input" class="block text-sm font-medium text-gray-700 mb-1">Cari Nama Halte</label>
                        <input type="text" id="search-input" placeholder="e.g., Harmoni" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 transition">
                    </div>
                    <div>
                        <label for="location-filter" class="block text-sm font-medium text-gray-700 mb-1">Filter Lokasi</label>
                        <select id="location-filter" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 transition bg-white">
                            <option value="">Semua Lokasi</option>
                        </select>
                    </div>
                    <div>
                        <label for="corridor-filter" class="block text-sm font-medium text-gray-700 mb-1">Filter Koridor</label>
                        <select id="corridor-filter" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-amber-500 focus:border-amber-500 transition bg-white">
                            <option value="">Semua Koridor</option>
                        </select>
                    </div>
                </div>
            </div>
            
            <div class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-white rounded-xl shadow-md p-5 border border-gray-200 text-center">
                    <h3 class="text-lg font-medium text-gray-500">Total Halte</h3>
                    <p id="total-halte" class="text-4xl font-bold text-amber-600 mt-1">0</p>
                </div>
                <div class="bg-white rounded-xl shadow-md p-5 border border-gray-200 text-center">
                    <h3 class="text-lg font-medium text-gray-500">Total Koridor</h3>
                    <p id="total-koridor" class="text-4xl font-bold text-amber-600 mt-1">0</p>
                </div>
                 <div class="bg-white rounded-xl shadow-md p-5 border border-gray-200 text-center">
                    <h3 class="text-lg font-medium text-gray-500">Total Lokasi</h3>
                    <p id="total-lokasi" class="text-4xl font-bold text-amber-600 mt-1">0</p>
                </div>
                <div class="bg-white rounded-xl shadow-md p-5 border border-gray-200 text-center">
                    <h3 class="text-lg font-medium text-gray-500">Halte Ditampilkan</h3>
                    <p id="halte-ditampilkan" class="text-4xl font-bold text-amber-600 mt-1">0</p>
                </div>
            </div>

            <section class="mb-8 md:mb-12">
                 <div class="bg-white rounded-xl shadow-md p-4 sm:p-6 mb-8 border border-gray-200">
                    <h2 class="text-2xl font-bold text-gray-800 mb-4 text-center">Wawasan Data</h2>
                    <p class="text-center text-gray-600 mb-6 max-w-3xl mx-auto">Visualisasi berikut memberikan gambaran tentang distribusi halte TransJakarta. Grafik ini akan diperbarui secara otomatis saat Anda menggunakan filter di atas untuk menjelajahi data lebih dalam.</p>
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-8 items-center">
                        <div>
                            <h3 class="text-xl font-semibold text-center mb-3 text-gray-700">Jumlah Halte per Lokasi</h3>
                            <div class="chart-container">
                                <canvas id="lokasiChart"></canvas>
                            </div>
                        </div>
                        <div>
                             <h3 class="text-xl font-semibold text-center mb-3 text-gray-700">Koridor dengan Halte Terbanyak</h3>
                            <div class="chart-container">
                                <canvas id="koridorChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>
            
            <section id="halte-list" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
            </section>

        </main>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const halteData = [
                { id: 0, nama: "Blok M", koridor: ['1'], lokasi: "Jakarta Selatan" },
                { id: 1, nama: "Sisingamangaraja", koridor: ['1'], lokasi: "Jakarta Selatan" },
                { id: 2, nama: "Masjid Agung", koridor: ['1'], lokasi: "Jakarta Selatan" },
                { id: 3, nama: "Bundaran Senayan", koridor: ['1'], lokasi: "Jakarta Selatan" },
                { id: 4, nama: "Gelora Bung Karno", koridor: ['1'], lokasi: "Jakarta Pusat" },
                { id: 5, nama: "Polda Metro Jaya", koridor: ['1'], lokasi: "Jakarta Selatan" },
                { id: 6, nama: "Bendungan Hilir", koridor: ['1'], lokasi: "Jakarta Pusat" },
                { id: 7, nama: "Karet Sudirman", koridor: ['1'], lokasi: "Jakarta Pusat" },
                { id: 8, nama: "Dukuh Atas 1", koridor: ['1', '4', '6', '13'], lokasi: "Jakarta Pusat" },
                { id: 9, nama: "Tosari", koridor: ['1'], lokasi: "Jakarta Pusat" },
                { id: 10, nama: "Bundaran HI", koridor: ['1'], lokasi: "Jakarta Pusat" },
                { id: 11, nama: "Sarinah", koridor: ['1'], lokasi: "Jakarta Pusat" },
                { id: 12, nama: "Bank Indonesia", koridor: ['1'], lokasi: "Jakarta Pusat" },
                { id: 13, nama: "Monumen Nasional", koridor: ['1', '2'], lokasi: "Jakarta Pusat" },
                { id: 14, nama: "Harmoni Sentral", koridor: ['1', '2', '3', '8'], lokasi: "Jakarta Pusat" },
                { id: 15, nama: "Sawah Besar", koridor: ['1', '3'], lokasi: "Jakarta Pusat" },
                { id: 16, nama: "Mangga Besar", koridor: ['1', '3'], lokasi: "Jakarta Barat" },
                { id: 17, nama: "Olimo", koridor: ['1'], lokasi: "Jakarta Barat" },
                { id: 18, nama: "Glodok", koridor: ['1'], lokasi: "Jakarta Barat" },
                { id: 19, nama: "Kota", koridor: ['1'], lokasi: "Jakarta Barat" },
                { id: 20, nama: "Pulogadung", koridor: ['2', '4'], lokasi: "Jakarta Timur" },
                { id: 21, nama: "Bermis", koridor: ['2'], lokasi: "Jakarta Timur" },
                { id: 22, nama: "Pulomas", koridor: ['2'], lokasi: "Jakarta Timur" },
                { id: 23, nama: "ASMI", koridor: ['2'], lokasi: "Jakarta Timur" },
                { id: 24, nama: "Pedongkelan", koridor: ['2'], lokasi: "Jakarta Pusat" },
                { id: 25, nama: "Cempaka Mas", koridor: ['2', '10'], lokasi: "Jakarta Pusat" },
                { id: 26, nama: "Sumur Batu", koridor: ['2'], lokasi: "Jakarta Pusat" },
                { id: 27, nama: "Cempaka Putih", koridor: ['2'], lokasi: "Jakarta Pusat" },
                { id: 28, nama: "Senen Sentral", koridor: ['2', '5', '7F'], lokasi: "Jakarta Pusat" },
                { id: 29, nama: "Kwitang", koridor: ['2'], lokasi: "Jakarta Pusat" },
                { id: 30, nama: "Gambir 2", koridor: ['2'], lokasi: "Jakarta Pusat" },
                { id: 31, nama: "Kalideres", koridor: ['3'], lokasi: "Jakarta Barat" },
                { id: 32, nama: "Pesakih", koridor: ['3'], lokasi: "Jakarta Barat" },
                { id: 33, nama: "Sumur Bor", koridor: ['3'], lokasi: "Jakarta Barat" },
                { id: 34, nama: "Rawa Buaya", koridor: ['3'], lokasi: "Jakarta Barat" },
                { id: 35, nama: "Jembatan Baru", koridor: ['3'], lokasi: "Jakarta Barat" },
                { id: 36, nama: "Dispenda Samsat Barat", koridor: ['3'], lokasi: "Jakarta Barat" },
                { id: 37, nama: "Jembatan Gantung", koridor: ['3'], lokasi: "Jakarta Barat" },
                { id: 38, nama: "Taman Kota", koridor: ['3'], lokasi: "Jakarta Barat" },
                { id: 39, nama: "Indosiar", koridor: ['3', '8'], lokasi: "Jakarta Barat" },
                { id: 40, nama: "Jelambar", koridor: ['3', '8', '9'], lokasi: "Jakarta Barat" },
                { id: 41, nama: "Grogol 1", koridor: ['3', '8', '9'], lokasi: "Jakarta Barat" },
                { id: 42, nama: "Roxy", koridor: ['3', '8'], lokasi: "Jakarta Pusat" },
                { id: 43, nama: "Pecenongan", koridor: ['2', '3', '8'], lokasi: "Jakarta Pusat" },
                { id: 44, nama: "Juanda", koridor: ['2', '3', '5C', '7F'], lokasi: "Jakarta Pusat" },
                { id: 45, nama: "Pasar Baru", koridor: ['2', '3', '5', '5C'], lokasi: "Jakarta Pusat" },
                { id: 46, nama: "Dukuh Atas 2", koridor: ['4', '6'], lokasi: "Jakarta Pusat" },
                { id: 47, nama: "Halimun", koridor: ['4', '6'], lokasi: "Jakarta Selatan" },
                { id: 48, nama: "Manggarai", koridor: ['4'], lokasi: "Jakarta Selatan" },
                { id: 49, nama: "Matraman", koridor: ['4', '5'], lokasi: "Jakarta Timur" },
                { id: 50, nama: "Tegal Parang", koridor: ['9', '13'], lokasi: "Jakarta Selatan" },
                { id: 51, nama: "Pancoran Barat", koridor: ['9'], lokasi: "Jakarta Selatan" },
                { id: 52, nama: "Cawang Ciliwung", koridor: ['9'], lokasi: "Jakarta Timur" },
                { id: 53, nama: "Cikoko Stasiun Cawang", koridor: ['9'], lokasi: "Jakarta Timur" },
                { id: 54, nama: "Tanjung Priok", koridor: ['10', '12'], lokasi: "Jakarta Utara" },
                { id: 55, nama: "Enggano", koridor: ['10', '12'], lokasi: "Jakarta Utara" },
                { id: 56, nama: "Permai Koja", koridor: ['10'], lokasi: "Jakarta Utara" },
                { id: 57, nama: "Sunter Kelapa Gading", koridor: ['10', '12'], lokasi: "Jakarta Utara" },
                { id: 58, nama: "Yos Sudarso Kodamar", koridor: ['10'], lokasi: "Jakarta Utara" },
                { id: 59, nama: "PGC 1", koridor: ['5', '7', '9', '10'], lokasi: "Jakarta Timur" },
                { id: 60, nama: "Kampung Melayu", koridor: ['5', '7', '11'], lokasi: "Jakarta Timur" },
                { id: 61, nama: "Ragunan", koridor: ['6'], lokasi: "Jakarta Selatan" },
                { id: 62, nama: "Deptan", koridor: ['6'], lokasi: "Jakarta Selatan" },
                { id: 63, nama: "Mampang Prapatan", koridor: ['6', '7', '9'], lokasi: "Jakarta Selatan" },
                { id: 64, nama: "Kuningan Timur", koridor: ['6', '9'], lokasi: "Jakarta Selatan" },
                { id: 65, nama: "Gatot Subroto Jamsostek", koridor: ['9'], lokasi: "Jakarta Selatan" },
                { id: 66, nama: "Slipi Petamburan", koridor: ['9'], lokasi: "Jakarta Pusat" },
                { id: 67, nama: "Slipi Kemanggisan", koridor: ['9'], lokasi: "Jakarta Barat" },
                { id: 68, nama: "Harapan Kita", koridor: ['9'], lokasi: "Jakarta Barat" },
                { id: 69, nama: "S. Parman Podomoro City", koridor: ['9'], lokasi: "Jakarta Barat" },
                { id: 70, nama: "Pinang Ranti", koridor: ['9'], lokasi: "Jakarta Timur" },
                { id: 71, nama: "Pluit", koridor: ['9', '12'], lokasi: "Jakarta Utara" },
                { id: 72, nama: "Ancol", koridor: ['5'], lokasi: "Jakarta Utara" },
                { id: 73, nama: "Lebak Bulus Grab", koridor: ['8'], lokasi: "Jakarta Selatan" },
                { id: 74, nama: "Pondok Indah 1", koridor: ['8'], lokasi: "Jakarta Selatan" },
                { id: 75, nama: "Kebayoran Lama", koridor: ['8', '13'], lokasi: "Jakarta Selatan" },
                { id: 76, nama: "Permata Hijau", koridor: ['8'], lokasi: "Jakarta Selatan" },
                { id: 77, nama: "Tomang Mandala", koridor: ['8'], lokasi: "Jakarta Barat" },
                { id: 78, nama: "CSW", koridor: ['1', '13'], lokasi: "Jakarta Selatan" },
                { id: 79, nama: "Ciledug Puri Beta 2", koridor: ['13'], lokasi: "Tangerang" },
            ];

            const searchInput = document.getElementById('search-input');
            const locationFilter = document.getElementById('location-filter');
            const corridorFilter = document.getElementById('corridor-filter');
            const halteList = document.getElementById('halte-list');
            const totalHalteEl = document.getElementById('total-halte');
            const totalKoridorEl = document.getElementById('total-koridor');
            const totalLokasiEl = document.getElementById('total-lokasi');
            const halteDitampilkanEl = document.getElementById('halte-ditampilkan');

            const allLokasi = [...new Set(halteData.map(h => h.lokasi))].sort();
            const allKoridor = [...new Set(halteData.flatMap(h => h.koridor))].sort((a, b) => {
                const numA = parseInt(a);
                const numB = parseInt(b);
                if (!isNaN(numA) && !isNaN(numB)) return numA - numB;
                return a.localeCompare(b);
            });

            totalHalteEl.textContent = halteData.length;
            totalKoridorEl.textContent = allKoridor.length;
            totalLokasiEl.textContent = allLokasi.length;

            allLokasi.forEach(lokasi => {
                const option = document.createElement('option');
                option.value = lokasi;
                option.textContent = lokasi;
                locationFilter.appendChild(option);
            });

            allKoridor.forEach(koridor => {
                const option = document.createElement('option');
                option.value = koridor;
                option.textContent = `Koridor ${koridor}`;
                corridorFilter.appendChild(option);
            });

            let lokasiChart, koridorChart;

            const renderHalte = (data) => {
                halteList.innerHTML = '';
                if (data.length === 0) {
                    halteList.innerHTML = `<p class="text-gray-500 text-center col-span-full">Tidak ada halte yang cocok dengan kriteria pencarian.</p>`;
                } else {
                    data.forEach(halte => {
                        const koridorBadges = halte.koridor.map(k => 
                            `<span class="inline-block bg-amber-100 text-amber-800 text-xs font-semibold mr-2 px-2.5 py-0.5 rounded-full">${k}</span>`
                        ).join('');
                        const card = document.createElement('div');
                        card.className = 'bg-white rounded-xl shadow-md p-5 border border-gray-200 hover:shadow-lg hover:border-amber-400 transition-all duration-300';
                        card.innerHTML = `
                            <h3 class="text-xl font-bold text-gray-800 mb-2">${halte.nama}</h3>
                            <p class="text-gray-500 mb-4">${halte.lokasi}</p>
                            <div class="flex flex-wrap items-center">
                                ${koridorBadges}
                            </div>
                        `;
                        halteList.appendChild(card);
                    });
                }
                halteDitampilkanEl.textContent = data.length;
            };

            const updateCharts = (data) => {
                const lokasiCounts = {};
                allLokasi.forEach(l => lokasiCounts[l] = 0);
                data.forEach(halte => {
                    lokasiCounts[halte.lokasi] = (lokasiCounts[halte.lokasi] || 0) + 1;
                });
                
                const koridorCounts = {};
                data.forEach(halte => {
                    halte.koridor.forEach(k => {
                        koridorCounts[k] = (koridorCounts[k] || 0) + 1;
                    });
                });
                
                const sortedKoridor = Object.entries(koridorCounts).sort(([,a],[,b]) => b-a).slice(0, 10);

                if (lokasiChart) lokasiChart.destroy();
                lokasiChart = new Chart(document.getElementById('lokasiChart'), {
                    type: 'bar',
                    data: {
                        labels: Object.keys(lokasiCounts),
                        datasets: [{
                            label: 'Jumlah Halte',
                            data: Object.values(lokasiCounts),
                            backgroundColor: 'rgba(217, 119, 6, 0.6)',
                            borderColor: 'rgba(217, 119, 6, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: { y: { beginAtZero: true } }
                    }
                });

                if (koridorChart) koridorChart.destroy();
                koridorChart = new Chart(document.getElementById('koridorChart'), {
                    type: 'bar',
                    data: {
                        labels: sortedKoridor.map(k => `Koridor ${k[0]}`),
                        datasets: [{
                            label: 'Jumlah Halte Dilayani',
                            data: sortedKoridor.map(k => k[1]),
                            backgroundColor: 'rgba(124, 58, 237, 0.6)',
                            borderColor: 'rgba(124, 58, 237, 1)',
                            borderWidth: 1
                        }]
                    },
                    options: {
                        indexAxis: 'y',
                        responsive: true,
                        maintainAspectRatio: false,
                        plugins: { legend: { display: false } },
                        scales: { x: { beginAtZero: true } }
                    }
                });
            };

            const filterData = () => {
                const searchTerm = searchInput.value.toLowerCase();
                const selectedLocation = locationFilter.value;
                const selectedCorridor = corridorFilter.value;

                const filteredData = halteData.filter(halte => {
                    const nameMatch = halte.nama.toLowerCase().includes(searchTerm);
                    const locationMatch = !selectedLocation || halte.lokasi === selectedLocation;
                    const corridorMatch = !selectedCorridor || halte.koridor.includes(selectedCorridor);
                    return nameMatch && locationMatch && corridorMatch;
                });

                renderHalte(filteredData);
                updateCharts(filteredData);
            };

            searchInput.addEventListener('input', filterData);
            locationFilter.addEventListener('change', filterData);
            corridorFilter.addEventListener('change', filterData);

            filterData();
        });
    </script>
</body>
</html>
